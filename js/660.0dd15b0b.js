"use strict";(self["define"]=self["define"]||[]).push([[660],{40192:function(e,t,r){r.d(t,{hP:function(){return l},KL:function(){return p},Go:function(){return d}});r(48675),r(3462);function n(){try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch(e){return!1}}const o="WebAssembly"in window,a=!(!navigator.mediaDevices||!navigator.mediaDevices.getDisplayMedia),c=!!document.pictureInPictureEnabled,i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),s=/android/i.test(navigator.userAgent),u=/iPad|iPhone|iPod/.test(navigator.userAgent),l=n(),f=!1,p=o&&(!f||l),d=a&&c&&!i&&!s&&!u&&p},54063:function(e,t,r){r.d(t,{zG:function(){return fr}});var n=r(61976),o=r(71836),a=r(69997),c=r(78255);const i=window.Worker;class s extends i{constructor(e){const t=new URL(e,location.href),n=new URL(r.p,location.href);if(t.origin!==location.origin){const e=new Blob([`_base='${n}';importScripts('${t}');`],{type:"application/javascript"});super(URL.createObjectURL(e)),(0,c.Z)(this,"url",void 0)}else super(t),(0,c.Z)(this,"url",void 0);this.url=t.href}}var u=r(40192),l=r(51020),f=r(82619),p=r(530);function d(e,t){var r=-1,n=null==e?0:e.length;while(++r<n)if(!1===t(e[r],r,e))break;return e}var v=d,b=r(26991),m=function(){try{var e=(0,b.Z)(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),y=m;function g(e,t,r){"__proto__"==t&&y?y(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var w=g,h=r(48445),j=Object.prototype,A=j.hasOwnProperty;function Z(e,t,r){var n=e[t];A.call(e,t)&&(0,h.Z)(n,r)&&(void 0!==r||t in e)||w(e,t,r)}var E=Z;function O(e,t,r,n){var o=!r;r||(r={});var a=-1,c=t.length;while(++a<c){var i=t[a],s=n?n(r[i],e[i],i,r,e):void 0;void 0===s&&(s=e[i]),o?w(r,i,s):E(r,i,s)}return r}var L=O,P=r(92409);function S(e,t){return e&&L(t,(0,P.Z)(t),e)}var k=S,x=r(97818),_=r(14496),U=r(92794);function C(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}var M=C,R=Object.prototype,T=R.hasOwnProperty;function I(e){if(!(0,_.Z)(e))return M(e);var t=(0,U.Z)(e),r=[];for(var n in e)("constructor"!=n||!t&&T.call(e,n))&&r.push(n);return r}var D=I,N=r(20866);function z(e){return(0,N.Z)(e)?(0,x.Z)(e,!0):D(e)}var W=z;function F(e,t){return e&&L(t,W(t),e)}var B=F,G=r(33306),H="object"==typeof exports&&exports&&!exports.nodeType&&exports,$=H&&"object"==typeof module&&module&&!module.nodeType&&module,J=$&&$.exports===H,K=J?G.Z.Buffer:void 0,V=K?K.allocUnsafe:void 0;function Y(e,t){if(t)return e.slice();var r=e.length,n=V?V(r):new e.constructor(r);return e.copy(n),n}var X=Y;function q(e,t){var r=-1,n=e.length;t||(t=Array(n));while(++r<n)t[r]=e[r];return t}var Q=q,ee=r(16028);function te(e,t){return L(e,(0,ee.Z)(e),t)}var re=te,ne=r(45550),oe=r(87064),ae=(0,oe.Z)(Object.getPrototypeOf,Object),ce=ae,ie=r(25876),se=Object.getOwnPropertySymbols,ue=se?function(e){var t=[];while(e)(0,ne.Z)(t,(0,ee.Z)(e)),e=ce(e);return t}:ie.Z,le=ue;function fe(e,t){return L(e,le(e),t)}var pe=fe,de=r(9193),ve=r(86476);function be(e){return(0,ve.Z)(e,W,le)}var me=be,ye=r(38592),ge=Object.prototype,we=ge.hasOwnProperty;function he(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&we.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var je=he,Ae=r(133);function Ze(e){var t=new e.constructor(e.byteLength);return new Ae.Z(t).set(new Ae.Z(e)),t}var Ee=Ze;function Oe(e,t){var r=t?Ee(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var Le=Oe,Pe=/\w*$/;function Se(e){var t=new e.constructor(e.source,Pe.exec(e));return t.lastIndex=e.lastIndex,t}var ke=Se,xe=r(35836),_e=xe.Z?xe.Z.prototype:void 0,Ue=_e?_e.valueOf:void 0;function Ce(e){return Ue?Object(Ue.call(e)):{}}var Me=Ce;function Re(e,t){var r=t?Ee(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var Te=Re,Ie="[object Boolean]",De="[object Date]",Ne="[object Map]",ze="[object Number]",We="[object RegExp]",Fe="[object Set]",Be="[object String]",Ge="[object Symbol]",He="[object ArrayBuffer]",$e="[object DataView]",Je="[object Float32Array]",Ke="[object Float64Array]",Ve="[object Int8Array]",Ye="[object Int16Array]",Xe="[object Int32Array]",qe="[object Uint8Array]",Qe="[object Uint8ClampedArray]",et="[object Uint16Array]",tt="[object Uint32Array]";function rt(e,t,r){var n=e.constructor;switch(t){case He:return Ee(e);case Ie:case De:return new n(+e);case $e:return Le(e,r);case Je:case Ke:case Ve:case Ye:case Xe:case qe:case Qe:case et:case tt:return Te(e,r);case Ne:return new n;case ze:case Be:return new n(e);case We:return ke(e);case Fe:return new n;case Ge:return Me(e)}}var nt=rt,ot=Object.create,at=function(){function e(){}return function(t){if(!(0,_.Z)(t))return{};if(ot)return ot(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),ct=at;function it(e){return"function"!=typeof e.constructor||(0,U.Z)(e)?{}:ct(ce(e))}var st=it,ut=r(36264),lt=r(1603),ft=r(8693),pt="[object Map]";function dt(e){return(0,ft.Z)(e)&&(0,ye.Z)(e)==pt}var vt=dt,bt=r(77941),mt=r(88932),yt=mt.Z&&mt.Z.isMap,gt=yt?(0,bt.Z)(yt):vt,wt=gt,ht="[object Set]";function jt(e){return(0,ft.Z)(e)&&(0,ye.Z)(e)==ht}var At=jt,Zt=mt.Z&&mt.Z.isSet,Et=Zt?(0,bt.Z)(Zt):At,Ot=Et,Lt=1,Pt=2,St=4,kt="[object Arguments]",xt="[object Array]",_t="[object Boolean]",Ut="[object Date]",Ct="[object Error]",Mt="[object Function]",Rt="[object GeneratorFunction]",Tt="[object Map]",It="[object Number]",Dt="[object Object]",Nt="[object RegExp]",zt="[object Set]",Wt="[object String]",Ft="[object Symbol]",Bt="[object WeakMap]",Gt="[object ArrayBuffer]",Ht="[object DataView]",$t="[object Float32Array]",Jt="[object Float64Array]",Kt="[object Int8Array]",Vt="[object Int16Array]",Yt="[object Int32Array]",Xt="[object Uint8Array]",qt="[object Uint8ClampedArray]",Qt="[object Uint16Array]",er="[object Uint32Array]",tr={};function rr(e,t,r,n,o,a){var c,i=t&Lt,s=t&Pt,u=t&St;if(r&&(c=o?r(e,n,o,a):r(e)),void 0!==c)return c;if(!(0,_.Z)(e))return e;var l=(0,ut.Z)(e);if(l){if(c=je(e),!i)return Q(e,c)}else{var f=(0,ye.Z)(e),d=f==Mt||f==Rt;if((0,lt.Z)(e))return X(e,i);if(f==Dt||f==kt||d&&!o){if(c=s||d?{}:st(e),!i)return s?pe(e,B(c,e)):re(e,k(c,e))}else{if(!tr[f])return o?e:{};c=nt(e,f,i)}}a||(a=new p.Z);var b=a.get(e);if(b)return b;a.set(e,c),Ot(e)?e.forEach((function(n){c.add(rr(n,t,r,n,e,a))})):wt(e)&&e.forEach((function(n,o){c.set(o,rr(n,t,r,o,e,a))}));var m=u?s?me:de.Z:s?W:P.Z,y=l?void 0:m(e);return v(y||e,(function(n,o){y&&(o=n,n=e[o]),E(c,o,rr(n,t,r,o,e,a))})),c}tr[kt]=tr[xt]=tr[Gt]=tr[Ht]=tr[_t]=tr[Ut]=tr[$t]=tr[Jt]=tr[Kt]=tr[Vt]=tr[Yt]=tr[Tt]=tr[It]=tr[Dt]=tr[Nt]=tr[zt]=tr[Wt]=tr[Ft]=tr[Xt]=tr[qt]=tr[Qt]=tr[er]=!0,tr[Ct]=tr[Mt]=tr[Bt]=!1;var nr=rr,or=1,ar=4;function cr(e){return nr(e,or|ar)}var ir=cr;function sr(){let e;e=new s(new URL(r.p+r.u(950),r.b)),console.log("Worker created using worker-plugin");const t=(0,n.Ud)(e);return{worker:t,_worker:e}}function ur(){const{worker:e,_worker:t}=sr(),{worker:r,_worker:n}=sr(),{scannerOnImage:c,scannerOnLine:i,recognizeAchievement:s}=e,{recognizeAchievement:p,scannerOnLine:d}=r;let v=e=>{};const b=e=>{v=e},m=e=>{throw v(-99),e};t.addEventListener("error",m),n.addEventListener("error",m);const y=(async()=>{try{const[t,n]=(0,a.LS)(),c=u.hP?"ort-wasm-simd.wasm":"ort-wasm.wasm",i=u.hP?"opencv-simd.wasm":"opencv-normal.wasm";await t,await(0,a.sB)([c,i,"ppocr.ort"],(e=>v(e)),n);const s=ir(f.i18n.amos);await Promise.all([e.setResources(o.ZP),r.setResources(o.ZP),e.initAchievementMap(l.Z,s),r.initAchievementMap(l.Z,s)]),v(100)}catch(c){throw v(-1),c}t.removeEventListener("error",m),n.removeEventListener("error",m),await Promise.all([e.init(),r.init()])})();return{recognizeAchievement:p,recognizeAchievement2:s,scannerOnLine:d,scannerOnLine2:i,scannerOnImage:c,initPromise:y,workerCV:e,workerOCR:r,onProgress:b}}let lr;function fr(){return lr||(lr=ur()),lr}},21277:function(e,t,r){function n(e,t){parent&&window!==parent&&parent.postMessage({app:"cocogoat.scanner.achievement",event:e,data:JSON.parse(JSON.stringify(t))},"*")}r.d(t,{l:function(){return n}})},72660:function(e,t,r){r.d(t,{Z:function(){return Z}});var n=r(19812),o=r(55893);const a={class:"l"},c={class:"x"},i=(0,n._)("div",{class:"text"},[(0,n.Uk)("当前浏览器不支持此功能"),(0,n._)("br"),(0,n.Uk)("请升级或更换浏览器")],-1),s={key:1,class:"scanner-loading"},u=(0,n._)("div",{class:"loader-animation"},[(0,n._)("span",{class:"cssload-loader"},[(0,n._)("span",{class:"cssload-loader-inner"})])],-1),l=(0,n._)("div",{class:"loader-text"},"椰羊正在饮甘露，马上就来",-1),f={class:"loader-progress"},p={class:"loader-progress-text"};function d(e,t,r,d,v,b){const m=(0,n.up)("fa-icon");return(0,n.wg)(),(0,n.iD)("div",null,[e.ocrCompatible?((0,n.wg)(),(0,n.iD)("div",s,[(0,n._)("div",{class:(0,o.C_)(e.$style.loader)},[u,l,(0,n._)("div",f,[(0,n._)("div",{class:"loader-progress-bar",style:(0,o.j5)({width:e.progress+"%"})},null,4)]),(0,n._)("div",p,[(0,n._)("span",null,(0,o.zw)(e.progressText||`${e.progress.toFixed(2)}%`),1)])],2)])):((0,n.wg)(),(0,n.iD)("div",{key:0,class:(0,o.C_)(e.$style.showUncompatible)},[(0,n._)("span",a,[(0,n.Wm)(m,{icon:["fab","internet-explorer"]}),(0,n._)("span",c,[(0,n.Wm)(m,{icon:"triangle-exclamation"})])]),i],2))])}var v=r(20521),b=r(40192),m=r(54063),y=r(21277),g=(0,n.aZ)({emits:["done"],setup(e,{emit:t}){const r=(0,v.iH)(0),o=(0,v.iH)("获取资源地址");return(0,n.bv)((async()=>{if(!b.KL)return;const e=(0,m.zG)();e.onProgress((e=>{if(!(r.value<0)){if((0,y.l)("load",e),r.value=e,e<-90)return(0,y.l)("load",!1),void(o.value="应用初始化失败, 请联系开发者");if(e<0)return(0,y.l)("load",!1),void(o.value="加载失败, 请刷新重试或联系开发者");o.value="",e>=100&&(o.value="校验完整性",setTimeout((()=>{(0,y.l)("load",!0),o.value="应用初始化"}),140))}})),e.initPromise.then((()=>{t("done")}))})),{ocrCompatible:b.KL,progress:r,progressText:o}}}),w={showUncompatible:"show-uncompatible-cfbfd0",loader:"loader-a3e60a",scannerCssloadLoader:"scanner-cssload-loader-eb1b08",scannerCssloadLoaderInner:"scanner-cssload-loader-inner-c70159"},h=r(48998);const j={};j["$style"]=w;const A=(0,h.Z)(g,[["render",d],["__cssModules",j]]);var Z=A},61976:function(e,t,r){r.d(t,{Jj:function(){return f},Ud:function(){return v}});r(21703),r(85827);const n=Symbol("Comlink.proxy"),o=Symbol("Comlink.endpoint"),a=Symbol("Comlink.releaseProxy"),c=Symbol("Comlink.thrown"),i=e=>"object"===typeof e&&null!==e||"function"===typeof e,s={canHandle:e=>i(e)&&e[n],serialize(e){const{port1:t,port2:r}=new MessageChannel;return f(e,t),[r,[r]]},deserialize(e){return e.start(),v(e)}},u={canHandle:e=>i(e)&&c in e,serialize({value:e}){let t;return t=e instanceof Error?{isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:{isError:!1,value:e},[t,[]]},deserialize(e){if(e.isError)throw Object.assign(new Error(e.value.message),e.value);throw e.value}},l=new Map([["proxy",s],["throw",u]]);function f(e,t=self){t.addEventListener("message",(function r(n){if(!n||!n.data)return;const{id:o,type:a,path:i}=Object.assign({path:[]},n.data),s=(n.data.argumentList||[]).map(Z);let u;try{const t=i.slice(0,-1).reduce(((e,t)=>e[t]),e),r=i.reduce(((e,t)=>e[t]),e);switch(a){case"GET":u=r;break;case"SET":t[i.slice(-1)[0]]=Z(n.data.value),u=!0;break;case"APPLY":u=r.apply(t,s);break;case"CONSTRUCT":{const e=new r(...s);u=j(e)}break;case"ENDPOINT":{const{port1:t,port2:r}=new MessageChannel;f(e,r),u=h(t,[t])}break;case"RELEASE":u=void 0;break;default:return}}catch(l){u={value:l,[c]:0}}Promise.resolve(u).catch((e=>({value:e,[c]:0}))).then((e=>{const[n,c]=A(e);t.postMessage(Object.assign(Object.assign({},n),{id:o}),c),"RELEASE"===a&&(t.removeEventListener("message",r),d(t))}))})),t.start&&t.start()}function p(e){return"MessagePort"===e.constructor.name}function d(e){p(e)&&e.close()}function v(e,t){return m(e,[],t)}function b(e){if(e)throw new Error("Proxy has been released and is not useable")}function m(e,t=[],r=function(){}){let n=!1;const c=new Proxy(r,{get(r,o){if(b(n),o===a)return()=>E(e,{type:"RELEASE",path:t.map((e=>e.toString()))}).then((()=>{d(e),n=!0}));if("then"===o){if(0===t.length)return{then:()=>c};const r=E(e,{type:"GET",path:t.map((e=>e.toString()))}).then(Z);return r.then.bind(r)}return m(e,[...t,o])},set(r,o,a){b(n);const[c,i]=A(a);return E(e,{type:"SET",path:[...t,o].map((e=>e.toString())),value:c},i).then(Z)},apply(r,a,c){b(n);const i=t[t.length-1];if(i===o)return E(e,{type:"ENDPOINT"}).then(Z);if("bind"===i)return m(e,t.slice(0,-1));const[s,u]=g(c);return E(e,{type:"APPLY",path:t.map((e=>e.toString())),argumentList:s},u).then(Z)},construct(r,o){b(n);const[a,c]=g(o);return E(e,{type:"CONSTRUCT",path:t.map((e=>e.toString())),argumentList:a},c).then(Z)}});return c}function y(e){return Array.prototype.concat.apply([],e)}function g(e){const t=e.map(A);return[t.map((e=>e[0])),y(t.map((e=>e[1])))]}const w=new WeakMap;function h(e,t){return w.set(e,t),e}function j(e){return Object.assign(e,{[n]:!0})}function A(e){for(const[t,r]of l)if(r.canHandle(e)){const[n,o]=r.serialize(e);return[{type:"HANDLER",name:t,value:n},o]}return[{type:"RAW",value:e},w.get(e)||[]]}function Z(e){switch(e.type){case"HANDLER":return l.get(e.name).deserialize(e.value);case"RAW":return e.value}}function E(e,t,r){return new Promise((n=>{const o=O();e.addEventListener("message",(function t(r){r.data&&r.data.id&&r.data.id===o&&(e.removeEventListener("message",t),n(r.data))})),e.start&&e.start(),e.postMessage(Object.assign({id:o},t),r)}))}function O(){return new Array(4).fill(0).map((()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16))).join("-")}}}]);